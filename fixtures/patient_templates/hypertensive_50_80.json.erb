{
  "description": "Hypertensive 50-80 year old, possibly immunized for flu (0041) and pneumonia (0043)",
  <% sex=gender %>
  "first": "<%= forename(sex) %>",
  "last": "<%= surname %>",
  "gender": "<%= sex %>",
  "patient_id": "<%= (0...10).map{ ('0'..'9').to_a[rand(10)] }.join.to_s %>",
  "birthdate": <%= between(Time.gm(1930, 1, 1), Time.gm(1960, 12, 31)) %>,
  "events": {
    "encounters": [
      {
        "description": "Outpatient encounter",
        "time": <%= between(Time.gm(2010, 1, 1), Time.gm(2010, 12, 31)) %>,
        "code": "99201",
        "code_set": "CPT"
      }
      ,{
        "description": "Outpatient encounter",
        "time": <%= between(Time.gm(2010, 1, 1), Time.gm(2010, 12, 31)) %>,
        "code": "99201",
        "code_set": "CPT"
      }
    ],
    "procedures": [
    ],
    "results": [
    ],
    "vital_signs": [
      "dummy"
      <% if percent(70) %>
      ,{
        "description": "Systolic",
        "time": <%= between(Time.gm(2010, 1, 1), Time.gm(2010, 12, 31)) %>,
        "code": "12929001",
        "code_set": "SNOMED-CT",
        "value": <%= between(120, 160) %>,
        "unit": "mmHg"
      }
      ,{
        "description": "Diastolic",
        "time": <%= between(Time.gm(2010, 1, 1), Time.gm(2010, 12, 31)) %>,
        "code": "163031004",
        "code_set": "SNOMED-CT",
        "value": <%= between(70, 110) %>,
        "unit": "mmHg"
      }
      <% end %>
    ],
    "medications": [
      "dummy"
      <% if percent(70) %>
      ,{
        "description": "Influenza Vaccine",
        "time": <%= between(Time.gm(2010, 9, 1), Time.gm(2010, 12, 31)) %>,
        "code": "857924",
        "code_set": "RxNorm"
      }
      <% end %>
      <% if percent(70) %>
      ,{
        "description": "Pneumonia Vaccine",
        "time": <%= between(Time.gm(2010, 1, 1), Time.gm(2010, 12, 31)) %>,
        "code": "854931",
        "code_set": "RxNorm"
      }
      <% end %>
    ],
    "conditions": [
      "dummy"
      ,{
        "description": "Hypertension",
        "time": <%= between(Time.gm(2010, 1, 1), Time.gm(2010, 12, 31)) %>,
        "code": "401.0",
        "code_set": "ICD-9-CM"
      }
    ]
  }
}